{"version":3,"sources":["assets/images/loading.gif","assets/icon/icon/cart.png","redux/actionCreator.js","component/header/header.jsx","api/request.js","api/config.js","api/api.js","component/Cart_input.jsx","component/carBar/CarBar.jsx","pages/Home/child/food.jsx","pages/Home/Home.jsx","pages/table/Table.jsx","router/router.js","component/layout/BaseLayout.jsx","App.jsx","redux/reducer.js","redux/store.js","index.js"],"names":["module","exports","mapStateToProps","state","ownProps","tabStatus","cart","cartSummary","scan","mapDispatchToProps","dispatch","activeTab","index","type","addCart","food","shop_id","current","setAllNum","allSummary","clearCart","localStorage","removeItem","setScan","shopDesc","Header","props","useState","history","useHistory","useEffect","setItem","JSON","stringify","getItem","parse","className","src","cover","alt","table","name","shop_name","t","viewBox","version","xmlns","p-id","width","height","d","fill","address","isAddProduct","onClick","push","pending","request","config","instance","axios","create","baseURL","timeout","headers","interceptors","response","use","res","data","i","url","defaults","console","log","f","removePending","error","Promise","reject","resolve","then","code","msg","catch","err","getDetailByShortTable","short","a","method","result","table_id","getList","cate_id","is_takeaway","getOrderDetailWithTableID","makeOrder","list","remark","order_id","connect","num","setNum","food_item","shopid","profit_name","cartFn","foodNum","flag","allNumber","oldPrice","memberPrice","productList","allCartComputer","Object","keys","values","forEach","e","product","el","number","np","times","sell_price","is_member","member_price","product_id","show","setShow","copy","j","length","is_buy","picture","product_name","summary","takeaway_price","discount_price","total_member_price","total_sell_price","total_takeaway_price","user_coupon_id","lists","setTimeout","style","map","key","cartimg","back","p_list","setPlist","food_list","setFoodlist","tab","setTab","loading","setLoading","isLoadingFn","status","req","s","scanRes","listRes","tabFn","qr","location","search","indexOf","params","replace","split","alert","initFn","init","renderArr","product_list","filter","loadingImg","fontSize","fontWeight","category_list","cate","category_id","category_name","order","setOrder","noPay","setNoPay","renderData","setData","hideLoading","totalCount","noOrder","totalPrice","reduce","pre","next","price","noArr","currentArr","pushArr","create_at","item","product_picture","total_price","router","home","desc","page","Home","Table","pathname","path","exact","component","userAgentInfo","navigator","userAgent","Agents","v","IsPC","BaseLayout","to","initState","againNumber","setFlag","tempList1","el2","splice","shopObj","member_id","couponNum","store","createStore","action","states","composeWithDevTools","ReactDOM","render","App","document","getElementById"],"mappings":"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","file":"static/js/main.2dddb5db.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loading.67c9d35d.gif\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACECAMAAAB8ppMbAAABO1BMVEUAAAD//wD/fwD/qgD/fwD/mQD/fyr/kiT/jhzoixftfxLuiBHyhhvzhhj0fxX2fxvwgxfxfxzyfxvzfxjzghj0fxv1ghnyghvyghnzgxjzgxf0gxn0gRn0gxn1gxjxgRjygxfygxrzgRjzghjzgRr0ghr0gRn0gRjygRryghnzghnzghjzghr0ghnygxjygxrzgxnzgxjzghnzgRnzghn0ghn0ghjygRnzgRjzghjzgRnzghnzgRn0gxnyghnzgxnzghnzghnzghnzghj0ghryghnzghnzghnzghrzghnzghnzgRnzghjzgRrygRnzgxnzghnzgxnzghnzghnzghn0ghnzghnzghnzghnzghnzghnzghnzghnzghnzghn0ghnzghnzghnzghnzghrzghnzghnzghnzghnzghlirN89AAAAaHRSTlMAAQIDBAUGBwkLDg8TFRgcISQmKiswMzk9QEJGR0hKS0xQVVZXWltfY2ZoamxydXd7f4OEhYeJjpKTlpeYnKGkpauusbS1uLm9vr/BxsfLzc7P1djZ3uTn6ezv8PHy8/T19vf6+/z9/vbAnWUAAAHnSURBVHja7drXUsJQFIXhgx2sCPYuYsHeFTs2VOy9UhTd7/8EhpMYEmaYwVB2Rte64O4/fFfAAYTQVj5+kaCc5xdZ58/9lMR5oCwzrz6g36wwEGX7VRn5IvFAaN5c10S5IK/VprqduCDUZqon+CABU73BB1k31Wd8kFNjXBHng0SNLyUe4oNQcz5xISGDhniJE2J8STvghOwZ4ntOyF26bSBOCNXpbRcvpFNvp3ghk3q7zQvZ1NsrXsil/mHkgxfyXqmlrcQLoRYtHeWGjGjpCjdkWUtPuCFhtXQ8c0Me1bKJuCHUKMsBfki/LGf5ITOyDPFDdmR5yw+5SYWuL37Ip9PCbbMYEHnvnLADJGDhtlkUyJqF22ZRIBHlK6u4HSDKvdM1bWWe7BCPpQOdAsMw7M9szNLc2Q90WztRENnhvYYIEEAAAQQQQAABBBBAAAHk30Icq0M/T92x9fMfrtpdb6khjiAlfZojRiFVUhuhB29pIcNB5UGVKA5SJYqD6GGhpJBr+ZiSSIeUSAfRV0kh2pI+zaFI6iN5HZUfhJLp761fiBNSuAECCCCAAAIIIIAAAggggAACCCCAAAIIIIAAAggggADCDHmzh+NJhO0BORS99oB0CzFnB8ds6hfkvuMYryJ21CPEN3RX/26nz4DRAAAAAElFTkSuQmCC\"","// import { } from '../api/api'\n\n\nexport const mapStateToProps = (state, ownProps) => {\n    return {\n        tabStatus: state.tabStatus,//tab路由状态\n        cart: state.cart,\n        cartSummary: state.cartSummary,\n        scan: state.scan\n    }\n}\n\nexport const mapDispatchToProps = (dispatch, ownProps) => {\n    return {\n        activeTab: (index) => {  //tab路由状态\n            dispatch({ type: 'TAB', index: index })\n        },\n        addCart: (food, shop_id, current) => {\n            dispatch({ type: 'ADDCART', food, shop_id, current })\n        },\n        setAllNum: (allSummary) => {\n            dispatch({ type: 'SETNUM', allSummary })\n        },\n        clearCart: () => {\n            localStorage.removeItem('cart');\n            dispatch({ type: 'CLEAR' })\n        },\n        setScan: (shopDesc) => {\n            dispatch({ type: 'SCAN', shopDesc })\n        }\n    }\n}\n","import React, { useEffect, useState } from 'react';\n// import { getDetailByShortTable } from '../../api/api';\nimport './header.scss'\nimport { useHistory } from 'react-router-dom';\nfunction Header(props) {\n    const [scan, setScan] = useState('');\n    const history = useHistory();\n    useEffect(() => {\n        if (props.scan) {\n            setScan(props.scan);\n            localStorage.setItem('shop_desc', JSON.stringify(props.scan))\n        } else if (localStorage.getItem('shop_desc')) {\n            setScan(JSON.parse(localStorage.getItem('shop_desc')));\n        }\n        // eslint-disable-next-line\n    }, [])\n    return (\n        <div className='title'  >\n            {scan &&\n                <>\n                    <div className='mask'> </div>\n                    <img className='cover' src={`${scan.cover}`} alt=\"\" />\n\n                    <div className='float_content'>\n                        <h2>{scan.table.name}</h2>\n                        <h3>{scan.shop_name}</h3>\n                        <p><svg t=\"1603694097223\" className=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1182\" width=\"14\" height=\"14\"><path d=\"M515.213312 64c-183.656448 0-339.219456 156.43648-339.219456 341.7344 0 194.046976 180.282368 392.484864 301.551616 531.95264 0.464896 0.560128 20.057088 22.311936 44.215296 22.311936 0.055296 0 2.052096 0 2.132992 0 24.144896 0 43.614208-21.751808 44.106752-22.311936 113.806336-130.828288 280.004608-346.546176 280.004608-531.95264C848.006144 220.43648 726.678528 64 515.213312 64zM526.465024 900.128768c-0.999424 0.984064-2.405376 2.092032-3.678208 2.981888-1.26976-0.889856-2.692096-1.997824-3.704832-2.981888l-14.669824-16.843776C389.44256 751.39072 231.995392 570.769408 231.995392 405.7344c0-154.891264 129.693696-285.7472 283.216896-285.7472 191.205376 0 276.791296 143.502336 276.791296 285.7472C792.003584 531.024896 702.671872 697.372672 526.465024 900.128768z\" p-id=\"1183\" fill=\"#FFFFFF\"></path><path d=\"M512.9984 233.562112c-92.778496 0-168.00256 75.22304-168.00256 168.00256 0 92.778496 75.224064 168.00256 168.00256 168.00256 92.777472 0 168.001536-75.225088 168.001536-168.00256C681.00096 308.785152 605.775872 233.562112 512.9984 233.562112zM512.9984 513.565696c-61.75744 0-113.288192-51.462144-113.288192-113.231872 0-61.75744 50.245632-112.002048 112.002048-112.002048 61.769728 0 112.001024 50.245632 112.001024 112.002048C623.714304 462.103552 574.768128 513.565696 512.9984 513.565696z\" p-id=\"1184\" fill=\"#FFFFFF\"></path></svg>{scan.address}</p>\n                    </div>\n                    {props.isAddProduct ? <div className='add' onClick={() => { history.push('/qrcode'); localStorage.setItem('again', 'yes') }}>\n                        加菜\n                    </div> : <div className='add' onClick={() => { history.push('/table') }}>\n                            订单\n                    </div>}\n                </>}\n        </div>\n    );\n}\nexport default Header;\n","import axios from 'axios'\nimport { baseURL, timeout } from './config'\n\nlet pending = []; //声明一个数组用于存储每个请求的取消函数和axios标识\n// let cancelToken = axios.CancelToken;\nlet removePending = (config) => {\n    // console.log(config);\n    for (let i in pending) {\n        if (pending[i].url === axios.defaults.baseURL + config.url) { //在当前请求在数组中存在时执行取消函数\n            console.log('取消————————————————————-')\n            pending[i].f(); //执行取消操作\n            //pending.splice(i, 1); 根据具体情况决定是否在这里就把pending去掉\n            console.log(pending[i].url);\n        }\n    }\n}\n\nexport function request(config) {\n    const instance = axios.create({\n        baseURL,\n        timeout,\n        headers: {\n            'Content-Type': 'application/json',\n            'token': '888'\n        }\n    })\n\n    //! 数据过滤\n    instance.interceptors.response.use(res => {\n        return res.data\n    })\n\n    //请求拦截\n    instance.interceptors.request.use(function (res) {\n        removePending(config); //在一个axios发送前执行一下判定操作，在removePending中执行取消操作\n        /**\n         * @addToken\n         */\n        return res\n    }, function (error) {\n\n        return Promise.reject(error)\n    })\n\n    // 此处封装一层捕捉错误\n    return new Promise((resolve, reject) => {\n        instance(config).then(res => {\n            if (res.code !== '0') {\n                reject(res.msg)\n            } else {\n                resolve(res)\n            }\n        }).catch(err => {\n            /**\n             * @err\n             */\n            if (err.response) {\n\n\n            }\n        })\n    })\n}\nexport default request;\n","// baseURL = 'http://47.108.151.32:9501'\n// export const baseURL = 'http://47.108.151.32:9501'//接口地址\nexport const baseURL = 'https://api.fishcashier.com'//接口地址\nexport const timeout = 10000                    //请求延迟\n","import { request } from './request'\n\n\nexport const getDetailByShortTable = async (short) => { // 桌号获取\n    const result = await request({\n        method: 'post',\n        url: '/client/v1/shop/table/detail-by-short',\n        data: { short },\n    })\n    localStorage.setItem('table_id', result.result.table.table_id)\n    localStorage.setItem('s', short)\n    return result;\n}\n\nexport const getList = async (shop_id, cate_id = '', is_takeaway = 1) => {\n    const result = await request({\n        method: 'post',\n        url: '/client/v1/product/list',\n        data: { shop_id, cate_id, is_takeaway: 1 },\n    })\n    return result;\n}\n\n\nexport const getOrderDetailWithTableID = async (table_id) => {\n    const result = await request({\n        method: 'post',\n        url: '/client/v1/order/detail-by-table',\n        data: { table_id }\n    })\n    return result;\n}\n\nexport const makeOrder = async (shop_id, list, table_id = '', remark = '', order_id = []) => {\n    // console.log(products);\n    const result = await request({\n        method: 'post',\n        url: '/client/v1/order/make',\n        data: {\n            shop_id,\n            list,\n            table_id,\n            remark,\n            order_id,\n        }\n    })\n    return result;\n}\n\n\n\n// export const getDetail = async (shop_id = '1') => {\n//     const result = await request({\n//         method: 'post',\n//         url: '/client/v1/shop/detail',\n//         data: { shop_id }\n//     })\n//     return result;\n// }","import React from 'react'\nimport { mapStateToProps, mapDispatchToProps } from '../redux/actionCreator'\nimport { connect } from 'react-redux'\nimport { useState, useEffect } from 'react'\nimport np from 'number-precision'\n\nimport './Cart_input.scss'\n\nfunction Input(props) {\n    const [num, setNum] = useState(0)\n    let { food_item, addCart, shopid, profit_name } = props;\n\n    function cartFn(food, shop_id, current) {\n        if (num === 0 && current === 'del') { // 如果数量为0 并且执行减操作的时候 不执行\n            return\n        }\n        addCart(food, shop_id, current);\n        foodNum(food)\n    }\n\n    useEffect(() => {\n        foodNum(food_item)\n        // eslint-disable-next-line\n    }, [props.cartSummary?.num]) // 同步更新cartBar\n\n    const foodNum = (food) => {\n        let flag = false;\n        let allNumber = 0;\n        let oldPrice = 0;\n        let memberPrice = 0;\n        let productList = []\n        let allCartComputer = {\n            num: 0,\n            oldPrice: 0,\n            memberPrice: 0,\n            productList: [],\n        };\n        if (props.cart) {\n            if (Object.keys(props.cart)[0]) {\n                Object.values(props.cart)[0].list.forEach(e => { // 购物车中的分类列表\n                    e.product.forEach(el => { // 每个分类对象下的菜品列表\n                        allNumber += el.number; // 购物车总数量\n                        oldPrice += np.times(el.number, el.sell_price); // 购物车总价格\n                        productList.push(el); // 购物车商品列表\n                        if (profit_name && el.is_member === 1) { // 购物车总会员价\n                            memberPrice += np.times(el.number, el.member_price);\n                        } else {\n                            memberPrice += np.times(el.number, el.sell_price);\n                        }\n                        if (el.product_id === food.product_id) {\n                            flag = true;\n                            if (el.number) { // 当前商品的数量\n                                setNum(el.number)\n                            } else {\n                                setNum(0)\n                            }\n                        }\n                    })\n                });\n            } else {\n                setNum(0)\n            }\n            if (!flag) { // 如果找不到该商品 默认0\n                setNum(0)\n            }\n            // 执行清空会默认复制 allCartComputer\n            allCartComputer.num = allNumber; // 菜品总数量\n            allCartComputer.memberPrice = memberPrice; // 会员的价\n            allCartComputer.oldPrice = oldPrice;\n            allCartComputer.productList = productList;\n            props.setAllNum({ ...allCartComputer });\n        }\n    }\n\n    return (\n        <div className='cart_input_wrap'>\n            <i className=\"btn btn-plus\" onClick={() => { cartFn(food_item, shopid, 'add') }}></i>\n            <span>{num}</span>\n            <i className=\"btn btn-minus\" onClick={() => { cartFn(food_item, shopid, 'del') }}></i>\n        </div>\n    )\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Input)","import React from 'react'\nimport { mapStateToProps, mapDispatchToProps } from '../../redux/actionCreator'\nimport { connect } from 'react-redux'\nimport { useState } from 'react'\nimport './carbar.scss'\nimport cartimg from '../../assets/icon/icon/cart.png'\nimport Input from '../Cart_input'\nimport { useHistory } from 'react-router-dom'\nimport { makeOrder } from '../../api/api'\nimport np from 'number-precision'\nfunction Carbar(props) {\n    const [show, setShow] = useState(false);\n    const history = useHistory();\n    let { cart, cartSummary } = props;\n    let shop_id = props.scan.shop_id;\n    // shop_id, list, table_id = '', remark = '', order_id = []\n    // 优惠券插入函数\n    // function cateCop(list) {\n    //     if (Object.keys(checkCoupon)[0]) {\n    //       let num = 0;\n    //       list.forEach((e, i) => {\n    //         if (checkCoupon.scope !== 1) {\n    //           if (checkCoupon.scope === 3) { // 适用分类\n    //             if (checkCoupon.category_id[0]) {\n    //               let isCop = checkCoupon.category_id.find((id) => id === e.category_id);\n    //               if (isCop && num < 1) {\n    //                 num++;\n    //                 list[i].user_coupon_id = checkCoupon.user_coupon_id;\n    //               }\n    //             }\n    //           } else if (checkCoupon.scope === 2) { // 不适用分类\n    //             if (checkCoupon.category_id[0]) {\n    //               let isCop = checkCoupon.category_id.find((id) => id === e.category_id);\n    //               if (!isCop && num < 1) {\n    //                 num++;\n    //                 list[i].user_coupon_id = checkCoupon.user_coupon_id;\n    //               }\n    //             }\n    //           }\n    //         }\n    //       });\n    //     }\n    //   }\n\n    function list() {\n        let copy = JSON.parse(JSON.stringify(cart));\n        if (copy[shop_id]) { // 删除多余的属性  调用预下单-\n            copy[shop_id].list.forEach((e, i) => {\n                for (let j = 0; j < copy[shop_id].list[i].product.length; j++) {\n                    let el = copy[shop_id].list[i].product[j];\n                    delete el.cate_id;\n                    delete el.is_buy;\n                    delete el.is_member;\n                    delete el.is_takeaway;\n                    delete el.member_price;\n                    delete el.picture;\n                    delete el.product_name;\n                    delete el.sell_price;\n                    delete el.summary;\n                    delete el.takeaway_price;\n                    delete el.discount_price;\n                    delete el.remark;\n                    delete el.total_member_price;\n                    delete el.total_sell_price;\n                    delete el.total_takeaway_price;\n                    delete el.user_coupon_id;\n                }\n            });\n            return copy[shop_id].list\n        }\n        return ''\n    }\n    async function back() {\n        if (cart[shop_id] && cart[shop_id].list[0]) {\n            let lists = list();\n            await makeOrder(shop_id, lists, localStorage.getItem('table_id'));\n            setTimeout(() => {\n                props.clearCart()\n                history.push('/table');\n            }, 200);\n        }\n    }\n    // console.log(props);\n    return (\n        <div className='carbar'>\n            <ul className={!show ? 'none_ul float_ul' : 'float_ul'} style={{ height: `${14 + 1 * cartSummary?.productList.length}rem` }}>\n                <div className='title'>\n                    <p>已选商品 ( {cartSummary?.num} )</p>\n                    <p onClick={props.clearCart} >清空</p>\n                </div>\n                <ul className={'produce_ul'}>\n                    {cartSummary?.productList && cartSummary.productList.map(e => {\n                        return (\n                            <li key={e.product_id}>\n                                <div className='desc_wrap'>\n                                    <div className='e_img'>\n                                        <img src={e.picture} alt=\"\" />\n                                    </div>\n                                    <div className='e_desc'>\n                                        <p>{e.product_name}</p>\n                                        <div><Input food_item={e} shopid={shop_id} profit_name={props.scan.profit_name} /></div>\n                                    </div>\n                                </div>\n                                <div className='e_price'>\n                                    {\n                                        // profit_name\n                                        //     ? (\n                                        //         e.is_member === 1\n                                        //             ? <>\n\n                                        //                 <p className='new'>¥{e.member_price}</p>\n                                        //                 <p className='old'>¥{e.sell_price}</p>\n                                        //             </>\n                                        //             : null\n                                        //     )\n                                        //     : \n                                        <p className='new'>¥{np.times(e.sell_price, e.number)}</p>\n                                    }\n                                </div>\n                            </li>\n                        )\n                    })}\n                </ul>\n\n            </ul>\n            <div className='cart_img footer' >\n                <img src={cartimg} alt=\"0\" onClick={() => { setShow(!show) }} />\n                <li>{cartSummary?.num}</li>\n            </div>\n            <div className='all_price'>\n                {\n                    // profit_name\n                    //     ? <>\n                    //         <p className='new'>¥{cartSummary?.memberPrice}</p>\n                    //         <p className='old'>¥{cartSummary?.oldPrice}</p>\n                    //     </>\n\n                    //     : \n                    <p className='new'>¥{cartSummary?.oldPrice}</p>\n                }\n            </div>\n            <div className='submit' onClick={() => { back() }}>\n                提交订单\n            </div>\n            {show && <div className='mask_s' onClick={() => setShow(false)} />}\n        </div>\n    )\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Carbar)","import React from 'react'\nimport { mapStateToProps, mapDispatchToProps } from '../../../redux/actionCreator'\nimport { connect } from 'react-redux'\nimport InputCart from '../../../component/Cart_input'\nfunction Food(props) {\n    const {\n        food, // 单项商品\n        profit_name, // 是否会员\n        shop_id,\n    } = props\n\n    return (\n        <div className='food_item'>\n\n            {\n                food ?\n                    <>\n                        <div className='img_wrap'>\n                            <img src={food.picture} alt=\"error\" />\n                        </div>\n                        <p>{food.product_name}</p>\n                        <div className='price'>\n                            <div>\n                                {\n                                    // profit_name\n                                    //     ? (\n                                    //         food.is_member === 1\n                                    //             ? <>\n\n                                    //                 <span className='new'>¥{food.member_price}</span>\n                                    //                 <span className='old'>¥{food.sell_price}</span>\n                                    //             </>\n                                    //             : null\n                                    //     )\n                                    //     : \n                                    <span className='new'>¥{food.sell_price}</span>\n                                }\n                            </div>\n                            <InputCart profit_name={profit_name} food_item={food} shopid={shop_id} />\n                        </div>\n                    </>\n                    : null\n            }\n        </div>\n    )\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Food)","import React from 'react';\nimport { mapStateToProps, mapDispatchToProps } from '../../redux/actionCreator';\nimport { connect } from 'react-redux';\nimport { useEffect, useState } from 'react';\nimport { getDetailByShortTable, getList } from '../../api/api';\nimport Carbar from '../../component/carBar/CarBar';\nimport Food from './child/food';\nimport { useHistory } from 'react-router-dom';\nimport loadingImg from '../../assets/images/loading.gif'\nimport './home.scss';\n\n\nfunction _Home(props) {\n    const [p_list, setPlist] = useState('');\n    const [food_list, setFoodlist] = useState([]);\n    const [tab, setTab] = useState(0);\n    const [loading, setLoading] = useState(true);\n    const history = useHistory();\n\n    /**\n     * @param {loding状态} status \n     */\n    function isLoadingFn(status) {\n        setTimeout(() => {\n            setLoading(status);\n        }, 400);\n    }\n\n    /**\n     * @param {桌码短号} s \n     * @param {成功信息} type \n     */\n    async function req(s, type) { // 请求短号pb\n        isLoadingFn(true)\n        try {\n            const scanRes = await getDetailByShortTable(s); // 桌码短号获取详情\n            if (scanRes.code === '0') {\n                localStorage.setItem('shortTable', JSON.stringify(scanRes.result))\n                props.setScan(scanRes.result);\n                const listRes = await getList(scanRes.result.shop_id);\n                if (listRes.code === '0') {\n                    localStorage.setItem('pList', JSON.stringify(listRes.result))\n                    setPlist(listRes.result);\n                    tabFn(0, listRes.result);\n                    isLoadingFn(false);\n                    console.log(type);\n                    return\n                }\n            }\n        } catch (error) {\n            tabFn(1, {}, error);\n        }\n    }\n\n    // 初始化所有数据\n    async function initFn() {\n        isLoadingFn(true)\n        const qr = (history.location.search.indexOf('s=') !== -1 && history.location.search.indexOf('t=') !== -1); // 判断是否二维码进入\n        if (localStorage.getItem('again') && !qr) {\n            const s = localStorage.getItem('s');\n            req(s, '加菜刷新');\n            setTimeout(() => {\n                localStorage.removeItem('again'); // 加菜刷新的读取判断\n            }, 600);\n        } else if (qr) {\n            const params = `${history.location.search}`.replace('?', '');\n            const s = `${`${params}`.split('&')[1]}`.split('=')[1]; // 桌码短号\n            req(s, '二维码读取');\n            return\n        } else if (localStorage.getItem('shortTable') && localStorage.getItem('pList')) { // 本地刷新的时候\n            setPlist(JSON.parse(localStorage.getItem('pList')));\n            tabFn(0, JSON.parse(localStorage.getItem('pList')));\n            props.setScan(JSON.parse(localStorage.getItem('shortTable')));\n            console.log('本地读取');\n            isLoadingFn(false);\n        } else {\n            alert('url不正确,桌码解析有误');\n        }\n    }\n\n    useEffect(() => {\n        initFn();\n        // eslint-disable-next-line \n    }, [])\n\n\n    /**\n     * @param {分类id 全部时为0} cate_id \n     * @param {初始化res.result} init \n     * @param {页面提示错误信息} error \n     */\n    const tabFn = (cate_id, init, error) => {\n        if (error) {\n            alert(error);\n            console.log(error);\n            return;\n        }\n\n        let renderArr = []\n        if ((cate_id || cate_id === 0) || (init && Object.keys(init)[0])) {\n            if (init) {\n                renderArr = init.product_list.filter(e => (e.cate_id == cate_id || cate_id == 0));\n                setTab(0);\n            } else {\n                renderArr = p_list.product_list.filter(e => (e.cate_id == cate_id || cate_id == 0));\n                setTab(cate_id);\n            }\n            if (renderArr) {\n                console.log(renderArr, 'tab__Render'); // 根据tab过滤出来的渲染数据 Array[]\n                setFoodlist(renderArr);\n            }\n        }\n    }\n\n\n    return (\n        <div className='home_wrap ' >\n            {loading && <div className='loading animate__fadeIn animate__animated'>\n                <img src={loadingImg} alt=\"\" />\n                <h2>loading.....</h2>\n            </div>}\n            {\n                (props.scan && p_list && !loading) ? (\n                    <>\n                        <div className='tab'>\n                            <ul>\n                                <li onClick={() => { tabFn(0) }} style={tab == 0 ? { fontSize: '1.2rem', fontWeight: '600' } : { fontSize: '1rem' }}>\n                                    全部分类\n                                        </li>\n                                {p_list.category_list && p_list.category_list.map((cate) => {\n                                    return (\n                                        <li onClick={() => { tabFn(cate.category_id) }} key={cate.category_id + cate.category_name} style={tab == cate.category_id ? { fontSize: '1.2rem', fontWeight: '600' } : { fontSize: '1rem' }}>\n                                            {cate.category_name}\n                                        </li>\n                                    )\n                                })}\n                            </ul>\n                        </div>\n                        <div className='food_wrap animate__fadeIn animate__animated'>\n                            {\n                                food_list && food_list.map((food_item) => {\n                                    return (\n                                        <div className='food' key={food_item.product_id}>\n                                            <Food\n                                                food={food_item}\n                                                shop_id={props.scan.shop_id}\n                                                profit_name={props.scan.profit_name ? true : false}\n                                            />\n                                        </div>\n                                    )\n                                })\n                            }\n                        </div>\n                        {props.scan && <Carbar />}\n                    </>\n                ) : null\n            }\n        </div>\n    )\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(_Home)","import React, { useEffect, useState } from 'react'\nimport { mapStateToProps, mapDispatchToProps } from '../../redux/actionCreator'\nimport { connect } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport { getOrderDetailWithTableID } from '../../api/api'\nimport np from 'number-precision'\nimport loadingImg from '../../assets/images/loading.gif'\nimport './table.scss'\nfunction Table(props) {\n    const [loading, setLoading] = useState(true);\n    const [order, setOrder] = useState('');\n    const [noPay, setNoPay] = useState([]); // 待支付\n    const [renderData, setData] = useState({})\n    // 1 取消 2 待支付 3 成功 4 失败 5 退款\n    // is_business \n    const history = useHistory();\n    function pushArr(e, currentArr) {\n        // let product = e.product.product;\n        currentArr.push(e);\n        // product.forEach(el => {\n        //     newArr.push(el)\n        // })\n    }\n    function hideLoading(status) {\n        setTimeout(() => {\n            setLoading(status)\n        }, 400);\n    }\n\n    function init() {\n        hideLoading(true);\n        if (localStorage.getItem('table_id')) {\n            // setTable_id(localStorage.getItem('table_id'));\n            getOrderDetailWithTableID(localStorage.getItem('table_id')).then(res => {\n                if (res.code === '0') {\n                    console.log(res, 'table _desc');\n                    let noArr = []; // 待支付\n                    let renderData = {}\n\n                    res.result[0] && res.result.forEach((e) => {\n                        renderData[e.order.order_id] = {\n                            product: e.product.product,\n                            status: e.order.status,\n                            order: e.order\n                        };\n                        if (e.order.status === 2) {\n                            pushArr(e, noArr)\n                        }\n                    })\n\n                    setNoPay(noArr);\n                    setData(renderData)\n                }\n                setOrder(res.result);\n            })\n        } else {\n            alert('table——Id不存在');\n            history.push('/qrcode')\n        }\n        hideLoading(false);\n    }\n\n    /**\n     * 未支付统计函数 no pay order\n     * @param {未支付订单数组} noOrder \n     * @param {渲染类型 ( 价格&&数量 )} type \n     */\n    function totalCount(noOrder, type) {\n        let totalCount = 0;\n        let totalPrice = 0;\n        noOrder.forEach((e) => {\n            totalCount += e.product.product.reduce((pre, next) => pre + next.number, 0)\n            totalPrice += e.product.product.reduce((pre, next) => pre + np.times(next.number, next.price), 0)\n        })\n        if (type === 'count') {\n            return totalCount\n        } else {\n            return totalPrice\n        }\n    }\n\n    function renderOrder() { // 渲染函数\n        if (Object.values(renderData)[0]) {\n            // 1 取消 2 待支付 3 成功 4 失败 5 退款\n            return Object.values(renderData).map((e) => {\n                let type = e.status; // 订单状态类型\n                return (\n                    <li key={e.order.order_id} className='p_item'>\n                        <div className='p_title' >\n                            <span>\n                                {type === 1 ? '已取消订单' : null}   {type === 2 ? '未结算订单' : null}   {type === 3 ? '已完成订单' : null}   {type === 4 ? '支付失败' : null}   {type === 5 ? '已退款订单' : null}\n                            </span>\n                            <p>{e.order.create_at}</p>\n                        </div>\n                        <div className='p_content'>\n                            {e.product.map((item) => {\n                                return <div key={e.order.order_id + item.product_id}>\n                                    <aside >\n                                        <div className='p_img_box'>\n                                            <img src={item.product_picture} alt=\"error\" />\n                                        </div>\n                                        <div className='p_desc'>\n                                            <p>{item.product_name}</p>\n                                            <p>x{item.number}</p>\n                                        </div>\n                                    </aside>\n                                    <div className='p_total'>\n                                        ¥{np.times(item.price, item.number)}\n                                    </div>\n                                </div>\n                            })}\n                        </div>\n                        <div className='p_footer'>\n                            <span>合计：</span>\n                            <span>¥</span>\n                            <span>{e.order.total_price}</span>\n                        </div>\n                    </li>\n                )\n            })\n        }\n\n        return false\n    }\n\n\n    useEffect(() => {\n        init();\n        if (!props.scan && localStorage.getItem('shortTable')) { // 防止header组件读取不到数据\n            props.setScan(JSON.parse(localStorage.getItem('shortTable')));\n        }\n        // eslint-disable-next-line\n    }, [])\n    return (\n        <div className=\"table_wrap\">\n            {loading && <div className='loading animate__fadeIn animate__animated' >\n                <img src={loadingImg} alt=\"\" />\n                <h2>loading......</h2>\n            </div>}\n            {\n                !loading\n                && <>\n                    {\n                        order\n                        && <>\n                            {\n                                noPay\n                                && <div className=\"bar\">\n                                    <p>\n                                        <span>未支付总计：</span>\n                                        <span>{totalCount(noPay, 'count')}件</span>\n                                        <span>¥{totalCount(noPay)}</span>\n                                    </p>\n                                </div>\n                            }\n                            <div className=\"order_wrap animate__fadeIn animate__animated\">\n                                {/*  1 取消 2 待支付 3 成功 4 失败 5 退款 */}\n                                <ul className=\"order_ul\">\n                                    {renderOrder()}\n                                </ul>\n                            </div>\n                        </>\n                    }\n                </>\n            }\n        </div>\n    )\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Table)","// import icon from '../assets/icon/icon'\n\nimport Home from '../pages/Home/Home'\n// import Test from '../pages/Test/Test'\nimport Table from '../pages/table/Table'\n\nlet router = () => {\n    return {\n        home: {\n            url: '/qrcode',\n            // icon: icon.Home,\n            // activeIcon: icon.Active.Home,\n            desc: '主页',\n            page: Home\n        },\n        // test: {\n        //     url: '/test',\n        //     // icon: icon.Home,\n        //     // activeIcon: icon.Active.Home,\n        //     desc: 'test',\n        //     page: Test\n        // },\n        table: {\n            url: '/table',\n            // icon: icon.Home,\n            // activeIcon: icon.Active.Home,\n            desc: '桌——详情',\n            page: Table\n        },\n    }\n}\nexport default router();","import React from 'react';\nimport { Route, useHistory } from 'react-router-dom';\nimport { mapStateToProps, mapDispatchToProps } from '../../redux/actionCreator'\nimport { connect } from 'react-redux'\nimport Header from '../header/header'\nimport './BaseLayout.scss'\nimport 'animate.css'\n//路由\nimport router from '../../router/router'\nfunction _Layout(props) {\n    const history = useHistory();\n    return (\n        <div className='layout animate__fadeIn animate__animated'>\n            {props.scan && <Header scan={props.scan} isAddProduct={history.location.pathname.indexOf('qrcode') === -1} />}\n            { // 路由组件\n                Object.values(router).map(e => {\n                    return (\n                        <Route path={e.url} exact={e.desc !== '主页'} component={e.page} key={e.url} />\n                    )\n                })\n            }\n            {/* <TabBar /> */}\n        </div>\n    )\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(_Layout)","import React from 'react'\nimport { mapStateToProps, mapDispatchToProps } from './redux/actionCreator'\nimport { connect } from 'react-redux'\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom'\n\n\n//路由\n// import router from './router/router'\n\n//布局组件\nimport BaseLayout from './component/layout/BaseLayout'\n\nimport { useEffect } from 'react'\n// import VConsole from 'vconsole';\n\nfunction _App(props) {\n    function IsPC() {\n        var userAgentInfo = navigator.userAgent;\n        console.log(userAgentInfo);\n        var Agents = [\"Android\", \"iPhone\", \"SymbianOS\", \"Windows Phone\", \"iPad\", \"iPod\"];\n        var flag = true;\n        for (var v = 0; v < Agents.length; v++) {\n            if (userAgentInfo.indexOf(Agents[v]) > 0) {\n                flag = false;\n                break;\n            }\n        }\n        return flag; // true:pc  false:mobile\n    }\n\n\n    useEffect(() => {\n        if (!IsPC()) {\n            // new VConsole()\n            // console.clear()\n        }\n    }, [])\n\n    return (\n        <>\n            <Router>\n                <Switch>\n                    <Route path='/' component={BaseLayout} ></Route>\n                    <Route path='/404' exact component={() => <h1>404</h1>}></Route>\n                    <Redirect to=\"/404\" />\n                </Switch>\n            </Router>\n        </>\n    )\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(_App)\n","let initState = {\n    tabStatus: 1,\n    cart: JSON.parse(localStorage.getItem('cart')) || {},\n    cartSummary: {\n        num: 0,\n        oldPrice: 0,\n        memberPrice: 0,\n        productList: [],\n    },\n}\n\n\nexport const reducer = (state = initState, action) => {\n    let states = JSON.parse(JSON.stringify(state))\n    switch (action.type) {\n        case \"TAB\":\n            console.log(action.index);\n            states.tabStatus = action.index\n            return states;\n        case 'ADDCART':\n            // console.log(action);\n            states.cart = cart(action.food, action.shop_id, action.current, state.cart);\n            localStorage.setItem('cart', JSON.stringify(states.cart))\n            console.log(states.cart);\n            return states;\n        case 'SETNUM':\n            states.cartSummary = action.allSummary;\n            return states;\n        case 'SCAN':\n            states.scan = action.shopDesc;\n            return states;\n        case 'CLEAR':\n            states.cart = {};\n            states.cartSummary = initState.cartSummary;\n            return states;\n        default:\n            return states;\n    }\n}\n\n\n\nfunction cart(food, shop_id, current, cart, againNumber) {\n    let item = JSON.parse(JSON.stringify(food)); // 菜品item\n    if (!item.number) {\n        item.number = 1; // 初始化菜品数量\n    }\n    let setFlag = false; // 删除店铺的开关\n    let list = []; //  如果不存在店铺list 初始化空list\n    if (cart[shop_id]) { // 如果存在店铺list 则赋值 在原有的list做操作\n        let tempList1 = [...cart[shop_id].list];\n        list = tempList1;\n    }\n\n    // 第一层分类操作\n    if (!list[0]) { // 如果分类为空 直接创建该分类\n        list.push({ category_id: item.cate_id, product: [] });\n    } else {\n        let flag = false; // 获取该商品分类对象是否已经存在 ⬇\n        list.forEach((el) => {\n            if (el.category_id === item.cate_id) {\n                flag = true;\n            }\n        });\n        if (!flag) { // 没有该分类 创建分类\n            list.push({ category_id: item.cate_id, product: [] });\n        }\n    }\n\n\n    // 将商品插入对应分类\n    list.forEach((el, index) => { // el ->>> 每个分类\n        let e = item;\n        if (item.cate_id === el.category_id) { // 找到--->当前商品分类对象 商品id===分类id\n            if (!el.product[0]) { // 如果该分类没有商品  直接插入 不走判断\n                list[index].product.push(e);\n            } else { // 购物车已有商品  根据 传入current执行加减\n                let flag = false; // 判断是否含有该商品 true->存在 false->不存在 存在则根据currentType来执行加减操作\n                el.product.forEach((el2, i) => { // 遍历该分类下的商品\n                    if (el2.product_id === item.product_id) {\n                        flag = true;            // 如果该分类对象 存在该商品根据currentType来执行加减操作\n                        if (current === 'add' && !againNumber) {\n                            list[index].product[i].number += 1;\n                        } else if (current === 'del') {\n                            list[index].product[i].number -= 1;\n                            if (list[index].product[i].number === 0) { // 如果该商品数量为0  删除商品\n                                list[index].product[i].number = 0\n                                list[index].product.splice(i, 1);\n                                if (!el.product[0]) { // 如果该分类商品为空 删除分类\n                                    list.splice(index, 1);\n                                }\n                                if (!list[0]) { // 如果该店铺list为空 del\n                                    console.log('删除店铺购物车对象');\n                                    setFlag = true;\n                                }\n                            }\n                        }\n                        // if (againNumber) { // 直接修改商品 number （再来一单使用）\n                        //     list[index].product[i].number = againNumber;\n                        // }\n                    }\n                });\n                if (!flag) { // 如果当前分类不存在该商品 push一个数量为1的初始化商品\n                    list[index].product.push(e);\n                }\n            }\n            if (list[index]) {\n                list[index].user_coupon_id = ''; // 分类优惠券预留\n            }\n        }\n    });\n\n    if (cart[shop_id]) { // 如果店铺存在 只改变list\n        cart[shop_id] = { ...cart[shop_id], list };\n    } else {\n        const shopObj = {\n            shop_id, // 店铺id\n            list, // list-> { 分类对象 } -> { product-list }\n            user_coupon_id: '', // 全场优惠卷\n            table_id: '',\n            member_id: '',\n            couponNum: null,\n        };\n        cart[shop_id] = shopObj;\n    }\n    if (setFlag) { // 如果list为空 删除该店铺购物车对象\n        delete cart[shop_id];\n    }\n    return cart\n}","import {\n    createStore,\n    //  applyMiddleware\n} from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension';\n// import thunk from 'redux-thunk'\nimport { reducer } from './reducer'\nconst store = createStore(reducer, composeWithDevTools())\nexport default store","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport store from './redux/store'\nimport { Provider } from 'react-redux'\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}