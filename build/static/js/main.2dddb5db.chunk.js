(this.webpackJsonph5_scan=this.webpackJsonph5_scan||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/loading.67c9d35d.gif"},39:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAACECAMAAAB8ppMbAAABO1BMVEUAAAD//wD/fwD/qgD/fwD/mQD/fyr/kiT/jhzoixftfxLuiBHyhhvzhhj0fxX2fxvwgxfxfxzyfxvzfxjzghj0fxv1ghnyghvyghnzgxjzgxf0gxn0gRn0gxn1gxjxgRjygxfygxrzgRjzghjzgRr0ghr0gRn0gRjygRryghnzghnzghjzghr0ghnygxjygxrzgxnzgxjzghnzgRnzghn0ghn0ghjygRnzgRjzghjzgRnzghnzgRn0gxnyghnzgxnzghnzghnzghnzghj0ghryghnzghnzghnzghrzghnzghnzgRnzghjzgRrygRnzgxnzghnzgxnzghnzghnzghn0ghnzghnzghnzghnzghnzghnzghnzghnzghnzghn0ghnzghnzghnzghnzghrzghnzghnzghnzghnzghlirN89AAAAaHRSTlMAAQIDBAUGBwkLDg8TFRgcISQmKiswMzk9QEJGR0hKS0xQVVZXWltfY2ZoamxydXd7f4OEhYeJjpKTlpeYnKGkpauusbS1uLm9vr/BxsfLzc7P1djZ3uTn6ezv8PHy8/T19vf6+/z9/vbAnWUAAAHnSURBVHja7drXUsJQFIXhgx2sCPYuYsHeFTs2VOy9UhTd7/8EhpMYEmaYwVB2Rte64O4/fFfAAYTQVj5+kaCc5xdZ58/9lMR5oCwzrz6g36wwEGX7VRn5IvFAaN5c10S5IK/VprqduCDUZqon+CABU73BB1k31Wd8kFNjXBHng0SNLyUe4oNQcz5xISGDhniJE2J8STvghOwZ4ntOyF26bSBOCNXpbRcvpFNvp3ghk3q7zQvZ1NsrXsil/mHkgxfyXqmlrcQLoRYtHeWGjGjpCjdkWUtPuCFhtXQ8c0Me1bKJuCHUKMsBfki/LGf5ITOyDPFDdmR5yw+5SYWuL37Ip9PCbbMYEHnvnLADJGDhtlkUyJqF22ZRIBHlK6u4HSDKvdM1bWWe7BCPpQOdAsMw7M9szNLc2Q90WztRENnhvYYIEEAAAQQQQAABBBBAAAHk30Icq0M/T92x9fMfrtpdb6khjiAlfZojRiFVUhuhB29pIcNB5UGVKA5SJYqD6GGhpJBr+ZiSSIeUSAfRV0kh2pI+zaFI6iN5HZUfhJLp761fiBNSuAECCCCAAAIIIIAAAggggAACCCCAAAIIIIAAAggggADCDHmzh+NJhO0BORS99oB0CzFnB8ds6hfkvuMYryJ21CPEN3RX/26nz4DRAAAAAElFTkSuQmCC"},42:function(e,t,a){e.exports=a(78)},47:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),o=(a(47),function(e,t){return{tabStatus:e.tabStatus,cart:e.cart,cartSummary:e.cartSummary,scan:e.scan}}),i=function(e,t){return{activeTab:function(t){e({type:"TAB",index:t})},addCart:function(t,a,n){e({type:"ADDCART",food:t,shop_id:a,current:n})},setAllNum:function(t){e({type:"SETNUM",allSummary:t})},clearCart:function(){localStorage.removeItem("cart"),e({type:"CLEAR"})},setScan:function(t){e({type:"SCAN",shopDesc:t})}}},s=a(4),u=a(13),m=a(2),d=a(5);a(52);var p=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(m.g)();return Object(n.useEffect)((function(){e.scan?(l(e.scan),localStorage.setItem("shop_desc",JSON.stringify(e.scan))):localStorage.getItem("shop_desc")&&l(JSON.parse(localStorage.getItem("shop_desc")))}),[]),r.a.createElement("div",{className:"title"},c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mask"}," "),r.a.createElement("img",{className:"cover",src:"".concat(c.cover),alt:""}),r.a.createElement("div",{className:"float_content"},r.a.createElement("h2",null,c.table.name),r.a.createElement("h3",null,c.shop_name),r.a.createElement("p",null,r.a.createElement("svg",{t:"1603694097223",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1182",width:"14",height:"14"},r.a.createElement("path",{d:"M515.213312 64c-183.656448 0-339.219456 156.43648-339.219456 341.7344 0 194.046976 180.282368 392.484864 301.551616 531.95264 0.464896 0.560128 20.057088 22.311936 44.215296 22.311936 0.055296 0 2.052096 0 2.132992 0 24.144896 0 43.614208-21.751808 44.106752-22.311936 113.806336-130.828288 280.004608-346.546176 280.004608-531.95264C848.006144 220.43648 726.678528 64 515.213312 64zM526.465024 900.128768c-0.999424 0.984064-2.405376 2.092032-3.678208 2.981888-1.26976-0.889856-2.692096-1.997824-3.704832-2.981888l-14.669824-16.843776C389.44256 751.39072 231.995392 570.769408 231.995392 405.7344c0-154.891264 129.693696-285.7472 283.216896-285.7472 191.205376 0 276.791296 143.502336 276.791296 285.7472C792.003584 531.024896 702.671872 697.372672 526.465024 900.128768z","p-id":"1183",fill:"#FFFFFF"}),r.a.createElement("path",{d:"M512.9984 233.562112c-92.778496 0-168.00256 75.22304-168.00256 168.00256 0 92.778496 75.224064 168.00256 168.00256 168.00256 92.777472 0 168.001536-75.225088 168.001536-168.00256C681.00096 308.785152 605.775872 233.562112 512.9984 233.562112zM512.9984 513.565696c-61.75744 0-113.288192-51.462144-113.288192-113.231872 0-61.75744 50.245632-112.002048 112.002048-112.002048 61.769728 0 112.001024 50.245632 112.001024 112.002048C623.714304 462.103552 574.768128 513.565696 512.9984 513.565696z","p-id":"1184",fill:"#FFFFFF"})),c.address)),e.isAddProduct?r.a.createElement("div",{className:"add",onClick:function(){o.push("/qrcode"),localStorage.setItem("again","yes")}},"\u52a0\u83dc"):r.a.createElement("div",{className:"add",onClick:function(){o.push("/table")}},"\u8ba2\u5355")))},f=(a(54),a(55),a(3)),g=a.n(f),h=a(11),b=a(27),v=a.n(b),_=[];function E(e){var t=v.a.create({baseURL:"https://api.fishcashier.com",timeout:1e4,headers:{"Content-Type":"application/json",token:"888"}});return t.interceptors.response.use((function(e){return e.data})),t.interceptors.request.use((function(t){return function(e){for(var t in _)_[t].url===v.a.defaults.baseURL+e.url&&(console.log("\u53d6\u6d88\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014-"),_[t].f(),console.log(_[t].url))}(e),t}),(function(e){return Promise.reject(e)})),new Promise((function(a,n){t(e).then((function(e){"0"!==e.code?n(e.msg):a(e)})).catch((function(e){e.response}))}))}var S=function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({method:"post",url:"/client/v1/shop/table/detail-by-short",data:{short:t}});case 2:return a=e.sent,localStorage.setItem("table_id",a.result.table.table_id),localStorage.setItem("s",t),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(g.a.mark((function e(t){var a,n,r=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"",r.length>2&&void 0!==r[2]?r[2]:1,e.next=4,E({method:"post",url:"/client/v1/product/list",data:{shop_id:t,cate_id:a,is_takeaway:1}});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({method:"post",url:"/client/v1/order/detail-by-table",data:{table_id:t}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(h.a)(g.a.mark((function e(t,a){var n,r,c,l,o=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:"",r=o.length>3&&void 0!==o[3]?o[3]:"",c=o.length>4&&void 0!==o[4]?o[4]:[],e.next=5,E({method:"post",url:"/client/v1/order/make",data:{shop_id:t,list:a,table_id:n,remark:r,order_id:c}});case 5:return l=e.sent,e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=(a(74),a(39)),N=a.n(A),z=a(18),x=a(12);a(75);var k=Object(s.b)(o,i)((function(e){var t,a=Object(n.useState)(0),c=Object(d.a)(a,2),l=c[0],o=c[1],i=e.food_item,s=e.addCart,u=e.shopid,m=e.profit_name;function p(e,t,a){0===l&&"del"===a||(s(e,t,a),f(e))}Object(n.useEffect)((function(){f(i)}),[null===(t=e.cartSummary)||void 0===t?void 0:t.num]);var f=function(t){var a=!1,n=0,r=0,c=0,l=[],i={num:0,oldPrice:0,memberPrice:0,productList:[]};e.cart&&(Object.keys(e.cart)[0]?Object.values(e.cart)[0].list.forEach((function(e){e.product.forEach((function(e){n+=e.number,r+=x.a.times(e.number,e.sell_price),l.push(e),m&&1===e.is_member?c+=x.a.times(e.number,e.member_price):c+=x.a.times(e.number,e.sell_price),e.product_id===t.product_id&&(a=!0,e.number?o(e.number):o(0))}))})):o(0),a||o(0),i.num=n,i.memberPrice=c,i.oldPrice=r,i.productList=l,e.setAllNum(Object(z.a)({},i)))};return r.a.createElement("div",{className:"cart_input_wrap"},r.a.createElement("i",{className:"btn btn-plus",onClick:function(){p(i,u,"add")}}),r.a.createElement("span",null,l),r.a.createElement("i",{className:"btn btn-minus",onClick:function(){p(i,u,"del")}}))}));var I=Object(s.b)(o,i)((function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(m.g)(),i=e.cart,s=e.cartSummary,u=e.scan.shop_id;function p(){var e=JSON.parse(JSON.stringify(i));return e[u]?(e[u].list.forEach((function(t,a){for(var n=0;n<e[u].list[a].product.length;n++){var r=e[u].list[a].product[n];delete r.cate_id,delete r.is_buy,delete r.is_member,delete r.is_takeaway,delete r.member_price,delete r.picture,delete r.product_name,delete r.sell_price,delete r.summary,delete r.takeaway_price,delete r.discount_price,delete r.remark,delete r.total_member_price,delete r.total_sell_price,delete r.total_takeaway_price,delete r.user_coupon_id}})),e[u].list):""}function f(){return(f=Object(h.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i[u]||!i[u].list[0]){t.next=5;break}return a=p(),t.next=4,j(u,a,localStorage.getItem("table_id"));case 4:setTimeout((function(){e.clearCart(),o.push("/table")}),200);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",{className:"carbar"},r.a.createElement("ul",{className:c?"float_ul":"none_ul float_ul",style:{height:"".concat(14+1*(null===s||void 0===s?void 0:s.productList.length),"rem")}},r.a.createElement("div",{className:"title"},r.a.createElement("p",null,"\u5df2\u9009\u5546\u54c1 ( ",null===s||void 0===s?void 0:s.num," )"),r.a.createElement("p",{onClick:e.clearCart},"\u6e05\u7a7a")),r.a.createElement("ul",{className:"produce_ul"},(null===s||void 0===s?void 0:s.productList)&&s.productList.map((function(t){return r.a.createElement("li",{key:t.product_id},r.a.createElement("div",{className:"desc_wrap"},r.a.createElement("div",{className:"e_img"},r.a.createElement("img",{src:t.picture,alt:""})),r.a.createElement("div",{className:"e_desc"},r.a.createElement("p",null,t.product_name),r.a.createElement("div",null,r.a.createElement(k,{food_item:t,shopid:u,profit_name:e.scan.profit_name})))),r.a.createElement("div",{className:"e_price"},r.a.createElement("p",{className:"new"},"\xa5",x.a.times(t.sell_price,t.number))))})))),r.a.createElement("div",{className:"cart_img footer"},r.a.createElement("img",{src:N.a,alt:"0",onClick:function(){l(!c)}}),r.a.createElement("li",null,null===s||void 0===s?void 0:s.num)),r.a.createElement("div",{className:"all_price"},r.a.createElement("p",{className:"new"},"\xa5",null===s||void 0===s?void 0:s.oldPrice)),r.a.createElement("div",{className:"submit",onClick:function(){!function(){f.apply(this,arguments)}()}},"\u63d0\u4ea4\u8ba2\u5355"),c&&r.a.createElement("div",{className:"mask_s",onClick:function(){return l(!1)}}))}));var w=Object(s.b)(o,i)((function(e){var t=e.food,a=e.profit_name,n=e.shop_id;return r.a.createElement("div",{className:"food_item"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"img_wrap"},r.a.createElement("img",{src:t.picture,alt:"error"})),r.a.createElement("p",null,t.product_name),r.a.createElement("div",{className:"price"},r.a.createElement("div",null,r.a.createElement("span",{className:"new"},"\xa5",t.sell_price)),r.a.createElement(k,{profit_name:a,food_item:t,shopid:n}))):null)})),C=a(22),R=a.n(C);a(76);var B=Object(s.b)(o,i)((function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),i=Object(d.a)(o,2),s=i[0],u=i[1],p=Object(n.useState)(0),f=Object(d.a)(p,2),b=f[0],v=f[1],_=Object(n.useState)(!0),E=Object(d.a)(_,2),O=E[0],j=E[1],A=Object(m.g)();function N(e){setTimeout((function(){j(e)}),400)}function z(e,t){return x.apply(this,arguments)}function x(){return(x=Object(h.a)(g.a.mark((function t(a,n){var r,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N(!0),t.prev=1,t.next=4,S(a);case 4:if("0"!==(r=t.sent).code){t.next=18;break}return localStorage.setItem("shortTable",JSON.stringify(r.result)),e.setScan(r.result),t.next=10,y(r.result.shop_id);case 10:if("0"!==(c=t.sent).code){t.next=18;break}return localStorage.setItem("pList",JSON.stringify(c.result)),l(c.result),C(0,c.result),N(!1),console.log(n),t.abrupt("return");case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),C(1,{},t.t0);case 23:case"end":return t.stop()}}),t,null,[[1,20]])})))).apply(this,arguments)}function k(){return(k=Object(h.a)(g.a.mark((function t(){var a,n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(N(!0),a=-1!==A.location.search.indexOf("s=")&&-1!==A.location.search.indexOf("t="),!localStorage.getItem("again")||a){t.next=8;break}z(localStorage.getItem("s"),"\u52a0\u83dc\u5237\u65b0"),setTimeout((function(){localStorage.removeItem("again")}),600),t.next=16;break;case 8:if(!a){t.next=15;break}return n="".concat(A.location.search).replace("?",""),z("".concat("".concat(n).split("&")[1]).split("=")[1],"\u4e8c\u7ef4\u7801\u8bfb\u53d6"),t.abrupt("return");case 15:localStorage.getItem("shortTable")&&localStorage.getItem("pList")?(l(JSON.parse(localStorage.getItem("pList"))),C(0,JSON.parse(localStorage.getItem("pList"))),e.setScan(JSON.parse(localStorage.getItem("shortTable"))),console.log("\u672c\u5730\u8bfb\u53d6"),N(!1)):alert("url\u4e0d\u6b63\u786e,\u684c\u7801\u89e3\u6790\u6709\u8bef");case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){k.apply(this,arguments)}()}),[]);var C=function(e,t,a){if(a)return alert(a),void console.log(a);var n=[];(e||0===e||t&&Object.keys(t)[0])&&(t?(n=t.product_list.filter((function(t){return t.cate_id==e||0==e})),v(0)):(n=c.product_list.filter((function(t){return t.cate_id==e||0==e})),v(e)),n&&(console.log(n,"tab__Render"),u(n)))};return r.a.createElement("div",{className:"home_wrap "},O&&r.a.createElement("div",{className:"loading animate__fadeIn animate__animated"},r.a.createElement("img",{src:R.a,alt:""}),r.a.createElement("h2",null,"loading.....")),e.scan&&c&&!O?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tab"},r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(){C(0)},style:0==b?{fontSize:"1.2rem",fontWeight:"600"}:{fontSize:"1rem"}},"\u5168\u90e8\u5206\u7c7b"),c.category_list&&c.category_list.map((function(e){return r.a.createElement("li",{onClick:function(){C(e.category_id)},key:e.category_id+e.category_name,style:b==e.category_id?{fontSize:"1.2rem",fontWeight:"600"}:{fontSize:"1rem"}},e.category_name)})))),r.a.createElement("div",{className:"food_wrap animate__fadeIn animate__animated"},s&&s.map((function(t){return r.a.createElement("div",{className:"food",key:t.product_id},r.a.createElement(w,{food:t,shop_id:e.scan.shop_id,profit_name:!!e.scan.profit_name}))}))),e.scan&&r.a.createElement(I,null)):null)}));a(77);var F=Object(s.b)(o,i)((function(e){var t=Object(n.useState)(!0),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),i=Object(d.a)(o,2),s=i[0],u=i[1],p=Object(n.useState)([]),f=Object(d.a)(p,2),g=f[0],h=f[1],b=Object(n.useState)({}),v=Object(d.a)(b,2),_=v[0],E=v[1],S=Object(m.g)();function y(e){setTimeout((function(){l(e)}),400)}function j(e,t){var a=0,n=0;return e.forEach((function(e){a+=e.product.product.reduce((function(e,t){return e+t.number}),0),n+=e.product.product.reduce((function(e,t){return e+x.a.times(t.number,t.price)}),0)})),"count"===t?a:n}return Object(n.useEffect)((function(){y(!0),localStorage.getItem("table_id")?O(localStorage.getItem("table_id")).then((function(e){if("0"===e.code){console.log(e,"table _desc");var t=[],a={};e.result[0]&&e.result.forEach((function(e){a[e.order.order_id]={product:e.product.product,status:e.order.status,order:e.order},2===e.order.status&&function(e,t){t.push(e)}(e,t)})),h(t),E(a)}u(e.result)})):(alert("table\u2014\u2014Id\u4e0d\u5b58\u5728"),S.push("/qrcode")),y(!1),!e.scan&&localStorage.getItem("shortTable")&&e.setScan(JSON.parse(localStorage.getItem("shortTable")))}),[]),r.a.createElement("div",{className:"table_wrap"},c&&r.a.createElement("div",{className:"loading animate__fadeIn animate__animated"},r.a.createElement("img",{src:R.a,alt:""}),r.a.createElement("h2",null,"loading......")),!c&&r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(r.a.Fragment,null,g&&r.a.createElement("div",{className:"bar"},r.a.createElement("p",null,r.a.createElement("span",null,"\u672a\u652f\u4ed8\u603b\u8ba1\uff1a"),r.a.createElement("span",null,j(g,"count"),"\u4ef6"),r.a.createElement("span",null,"\xa5",j(g)))),r.a.createElement("div",{className:"order_wrap animate__fadeIn animate__animated"},r.a.createElement("ul",{className:"order_ul"},!!Object.values(_)[0]&&Object.values(_).map((function(e){var t=e.status;return r.a.createElement("li",{key:e.order.order_id,className:"p_item"},r.a.createElement("div",{className:"p_title"},r.a.createElement("span",null,1===t?"\u5df2\u53d6\u6d88\u8ba2\u5355":null,"   ",2===t?"\u672a\u7ed3\u7b97\u8ba2\u5355":null,"   ",3===t?"\u5df2\u5b8c\u6210\u8ba2\u5355":null,"   ",4===t?"\u652f\u4ed8\u5931\u8d25":null,"   ",5===t?"\u5df2\u9000\u6b3e\u8ba2\u5355":null),r.a.createElement("p",null,e.order.create_at)),r.a.createElement("div",{className:"p_content"},e.product.map((function(t){return r.a.createElement("div",{key:e.order.order_id+t.product_id},r.a.createElement("aside",null,r.a.createElement("div",{className:"p_img_box"},r.a.createElement("img",{src:t.product_picture,alt:"error"})),r.a.createElement("div",{className:"p_desc"},r.a.createElement("p",null,t.product_name),r.a.createElement("p",null,"x",t.number))),r.a.createElement("div",{className:"p_total"},"\xa5",x.a.times(t.price,t.number)))}))),r.a.createElement("div",{className:"p_footer"},r.a.createElement("span",null,"\u5408\u8ba1\uff1a"),r.a.createElement("span",null,"\xa5"),r.a.createElement("span",null,e.order.total_price)))})))))))})),J={home:{url:"/qrcode",desc:"\u4e3b\u9875",page:B},table:{url:"/table",desc:"\u684c\u2014\u2014\u8be6\u60c5",page:F}};var T=Object(s.b)(o,i)((function(e){var t=Object(m.g)();return r.a.createElement("div",{className:"layout animate__fadeIn animate__animated"},e.scan&&r.a.createElement(p,{scan:e.scan,isAddProduct:-1===t.location.pathname.indexOf("qrcode")}),Object.values(J).map((function(e){return r.a.createElement(m.b,{path:e.url,exact:"\u4e3b\u9875"!==e.desc,component:e.page,key:e.url})})))}));var D=Object(s.b)(o,i)((function(e){return Object(n.useEffect)((function(){!function(){var e=navigator.userAgent;console.log(e);for(var t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],a=!0,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){a=!1;break}}()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/",component:T}),r.a.createElement(m.b,{path:"/404",exact:!0,component:function(){return r.a.createElement("h1",null,"404")}}),r.a.createElement(m.a,{to:"/404"}))))})),L=a(15),P=a(40),M=a(41),U={tabStatus:1,cart:JSON.parse(localStorage.getItem("cart"))||{},cartSummary:{num:0,oldPrice:0,memberPrice:0,productList:[]}};function Q(e,t,a,n,r){var c=JSON.parse(JSON.stringify(e));c.number||(c.number=1);var l=!1,o=[];if(n[t]){var i=Object(M.a)(n[t].list);o=i}if(o[0]){var s=!1;o.forEach((function(e){e.category_id===c.cate_id&&(s=!0)})),s||o.push({category_id:c.cate_id,product:[]})}else o.push({category_id:c.cate_id,product:[]});if(o.forEach((function(e,t){var n=c;if(c.cate_id===e.category_id){if(e.product[0]){var i=!1;e.product.forEach((function(n,s){n.product_id===c.product_id&&(i=!0,"add"!==a||r?"del"===a&&(o[t].product[s].number-=1,0===o[t].product[s].number&&(o[t].product[s].number=0,o[t].product.splice(s,1),e.product[0]||o.splice(t,1),o[0]||(console.log("\u5220\u9664\u5e97\u94fa\u8d2d\u7269\u8f66\u5bf9\u8c61"),l=!0))):o[t].product[s].number+=1)})),i||o[t].product.push(n)}else o[t].product.push(n);o[t]&&(o[t].user_coupon_id="")}})),n[t])n[t]=Object(z.a)(Object(z.a)({},n[t]),{},{list:o});else{var u={shop_id:t,list:o,user_coupon_id:"",table_id:"",member_id:"",couponNum:null};n[t]=u}return l&&delete n[t],n}var H=Object(L.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(e));switch(t.type){case"TAB":return console.log(t.index),a.tabStatus=t.index,a;case"ADDCART":return a.cart=Q(t.food,t.shop_id,t.current,e.cart),localStorage.setItem("cart",JSON.stringify(a.cart)),console.log(a.cart),a;case"SETNUM":return a.cartSummary=t.allSummary,a;case"SCAN":return a.scan=t.shopDesc,a;case"CLEAR":return a.cart={},a.cartSummary=U.cartSummary,a;default:return a}}),Object(P.composeWithDevTools)());l.a.render(r.a.createElement(s.a,{store:H},r.a.createElement(D,null)),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.2dddb5db.chunk.js.map